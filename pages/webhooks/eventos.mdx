---
title: "Lista de Eventos de Webhook"
description: "Refer√™ncia completa de todos os eventos de webhook dispon√≠veis na Debita AI com exemplos de payload para cada tipo."
---

# Eventos de Webhook

Esta p√°gina lista todos os eventos de webhook dispon√≠veis na Debita AI, seus payloads detalhados e quando cada evento √© disparado.

## üìã Categorias de Eventos

<CardGroup cols={4}>
  <Card title="Charges" icon="credit-card">
    Eventos do ciclo de vida de cobran√ßas (5 eventos)
  </Card>
  <Card title="Customers" icon="users">
    Eventos de clientes (3 eventos)
  </Card>
  <Card title="Refunds" icon="undo">
    Eventos de estorno e reembolso (4 eventos)
  </Card>
  <Card title="Transactions" icon="exchange">
    Eventos de transa√ß√µes financeiras (3 eventos)
  </Card>
</CardGroup>

## üí≥ Eventos de Charges

### charge.created
**Quando**: Uma nova cobran√ßa √© criada via API.

```json
{
  "event": "charge.created",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T10:00:00-03:00",
  "data": {
    "id": "chg_1a2b3c4d5e6f",
    "status": "pending",
    "amount": 15000,
    "currency": "BRL",
    "description": "Compra de produto premium",
    "method": "pix",
    "customer": {
      "id": "cust_9z8y7x6w",
      "name": "Maria Silva",
      "document": "123.456.789-09",
      "email": "maria@email.com",
      "phone": "+5511987654321"
    },
    "pix": {
      "qr_code": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA...",
      "payload": "00020126580014br.gov.bcb.pix...",
      "expires_at": "2024-01-01T10:30:00-03:00",
      "txid": "TXN123456789"
    },
    "external_id": "pedido_12345",
    "metadata": {
      "categoria": "premium",
      "vendedor": "loja_tech"
    },
    "created_at": "2024-01-01T10:00:00-03:00"
  }
}
```

**Casos de uso**:
- Registrar cobran√ßa no sistema interno
- Iniciar timeout de expira√ß√£o
- Notificar equipe de vendas

---

### charge.succeeded
**Quando**: Pagamento √© confirmado e processado com sucesso.

```json
{
  "event": "charge.succeeded",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T10:15:00-03:00",
  "data": {
    "id": "chg_1a2b3c4d5e6f",
    "status": "confirmed",
    "amount": 15000,
    "currency": "BRL",
    "description": "Compra de produto premium",
    "method": "pix",
    "customer": {
      "id": "cust_9z8y7x6w",
      "name": "Maria Silva",
      "document": "123.456.789-09",
      "email": "maria@email.com",
      "phone": "+5511987654321"
    },
    "pix": {
      "txid": "TXN123456789",
      "end_to_end_id": "E12345678202401011015123456789",
      "paid_at": "2024-01-01T10:15:00-03:00"
    },
    "paid_at": "2024-01-01T10:15:00-03:00",
    "external_id": "pedido_12345",
    "metadata": {
      "categoria": "premium",
      "vendedor": "loja_tech"
    },
    "fee": {
      "amount": 150,
      "description": "Taxa de processamento PIX"
    },
    "net_amount": 14850
  }
}
```

**Campos espec√≠ficos**:
- `pix.end_to_end_id`: Identificador √∫nico da transa√ß√£o PIX
- `fee.amount`: Taxa cobrada pela transa√ß√£o
- `net_amount`: Valor l√≠quido ap√≥s dedu√ß√£o das taxas

**Casos de uso**:
- Liberar produto/servi√ßo
- Enviar email de confirma√ß√£o
- Atualizar estoque
- Acionar fulfillment

---

### charge.failed
**Quando**: Pagamento falha por algum motivo.

```json
{
  "event": "charge.failed",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T10:20:00-03:00",
  "data": {
    "id": "chg_1a2b3c4d5e6f",
    "status": "failed",
    "amount": 15000,
    "currency": "BRL",
    "description": "Compra de produto premium",
    "method": "pix",
    "customer": {
      "id": "cust_9z8y7x6w",
      "name": "Maria Silva",
      "document": "123.456.789-09",
      "email": "maria@email.com",
      "phone": "+5511987654321"
    },
    "failure": {
      "code": "INSUFFICIENT_FUNDS",
      "message": "Saldo insuficiente na conta do pagador",
      "category": "user_error",
      "occurred_at": "2024-01-01T10:20:00-03:00"
    },
    "external_id": "pedido_12345",
    "metadata": {
      "categoria": "premium",
      "vendedor": "loja_tech"
    }
  }
}
```

**C√≥digos de falha comuns**:
- `INSUFFICIENT_FUNDS`: Saldo insuficiente
- `INVALID_ACCOUNT`: Conta inv√°lida
- `LIMIT_EXCEEDED`: Limite de transa√ß√£o excedido
- `PAYMENT_REJECTED`: Pagamento rejeitado pelo banco

**Casos de uso**:
- Liberar estoque reservado
- Notificar cliente sobre falha
- Sugerir m√©todo alternativo
- Registrar motivo da falha

---

### charge.expired
**Quando**: Cobran√ßa expira sem ser paga.

```json
{
  "event": "charge.expired",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T10:30:01-03:00",
  "data": {
    "id": "chg_1a2b3c4d5e6f",
    "status": "expired",
    "amount": 15000,
    "currency": "BRL",
    "description": "Compra de produto premium",
    "method": "pix",
    "customer": {
      "id": "cust_9z8y7x6w",
      "name": "Maria Silva",
      "document": "123.456.789-09",
      "email": "maria@email.com",
      "phone": "+5511987654321"
    },
    "pix": {
      "expires_at": "2024-01-01T10:30:00-03:00",
      "txid": "TXN123456789"
    },
    "expired_at": "2024-01-01T10:30:00-03:00",
    "external_id": "pedido_12345",
    "metadata": {
      "categoria": "premium",
      "vendedor": "loja_tech"
    }
  }
}
```

**Casos de uso**:
- Liberar estoque reservado
- Enviar email de carrinho abandonado
- Oferecer nova tentativa de pagamento
- Atualizar m√©tricas de convers√£o

---

### charge.cancelled
**Quando**: Cobran√ßa √© cancelada manualmente.

```json
{
  "event": "charge.cancelled",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T10:25:00-03:00",
  "data": {
    "id": "chg_1a2b3c4d5e6f",
    "status": "canceled",
    "amount": 15000,
    "currency": "BRL",
    "description": "Compra de produto premium",
    "method": "pix",
    "customer": {
      "id": "cust_9z8y7x6w",
      "name": "Maria Silva",
      "document": "123.456.789-09",
      "email": "maria@email.com"
    },
    "cancellation": {
      "reason": "customer_request",
      "canceled_by": "user_id_123",
      "canceled_at": "2024-01-01T10:25:00-03:00",
      "notes": "Cliente solicitou cancelamento por email"
    },
    "external_id": "pedido_12345"
  }
}
```

**Motivos de cancelamento**:
- `customer_request`: Solicitado pelo cliente
- `fraud_prevention`: Preven√ß√£o de fraude
- `system_error`: Erro do sistema
- `business_rules`: Regras de neg√≥cio

**Casos de uso**:
- Liberar estoque
- Notificar cliente
- Processar reembolso se necess√°rio
- Atualizar analytics

## üë• Eventos de Customers

### customer.created
**Quando**: Um novo cliente √© criado via API.

```json
{
  "event": "customer.created",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T09:30:00-03:00",
  "data": {
    "id": "cust_9z8y7x6w",
    "name": "Maria Silva Santos",
    "email": "maria.silva@email.com",
    "phone": "+5511987654321",
    "document": "123.456.789-09",
    "document_type": "CPF",
    "address": {
      "street": "Rua das Flores, 123",
      "neighborhood": "Centro",
      "city": "S√£o Paulo",
      "state": "SP",
      "postal_code": "01310-100"
    },
    "metadata": {
      "source": "signup_form",
      "campaign": "black_friday"
    },
    "created_at": "2024-01-01T09:30:00-03:00"
  }
}
```

**Casos de uso**:
- Sincronizar com CRM
- Enviar email de boas-vindas
- Iniciar onboarding
- Validar dados cadastrais

---

### customer.updated
**Quando**: Dados de um cliente s√£o atualizados.

```json
{
  "event": "customer.updated",
  "api_version": "2024-01",
  "timestamp": "2024-01-05T14:20:00-03:00",
  "data": {
    "id": "cust_9z8y7x6w",
    "name": "Maria Silva Santos",
    "email": "maria.novoemail@email.com",
    "phone": "+5511987654321",
    "document": "123.456.789-09",
    "previous_values": {
      "email": "maria.silva@email.com"
    },
    "updated_fields": ["email"],
    "updated_at": "2024-01-05T14:20:00-03:00"
  }
}
```

**Casos de uso**:
- Atualizar registros em sistemas integrados
- Revalidar dados de contato
- Atualizar prefer√™ncias de comunica√ß√£o

---

### customer.deleted
**Quando**: Um cliente √© removido do sistema (LGPD/Right to be forgotten).

```json
{
  "event": "customer.deleted",
  "api_version": "2024-01",
  "timestamp": "2024-01-10T16:45:00-03:00",
  "data": {
    "id": "cust_9z8y7x6w",
    "deletion_reason": "customer_request",
    "deleted_by": "user_admin_123",
    "anonymized_data": {
      "total_charges": 15,
      "total_amount": 450000,
      "last_purchase": "2024-01-01"
    },
    "deleted_at": "2024-01-10T16:45:00-03:00"
  }
}
```

**Casos de uso**:
- Remover dados pessoais de sistemas integrados
- Manter dados anonimizados para analytics
- Confirmar compliance com LGPD

## ‚Ü©Ô∏è Eventos de Refunds

### refund.created
**Quando**: Um reembolso √© iniciado via API.

```json
{
  "event": "refund.created",
  "api_version": "2024-01",
  "timestamp": "2024-01-02T14:00:00-03:00",
  "data": {
    "id": "ref_7g8h9i0j1k2l",
    "status": "processing",
    "amount": 7500,
    "currency": "BRL",
    "reason": "customer_request",
    "description": "Reembolso parcial - produto danificado",
    "charge": {
      "id": "chg_1a2b3c4d5e6f",
      "amount": 15000,
      "external_id": "pedido_12345"
    },
    "customer": {
      "id": "cust_9z8y7x6w",
      "name": "Maria Silva",
      "email": "maria@email.com"
    },
    "created_at": "2024-01-02T14:00:00-03:00",
    "estimated_completion": "2024-01-02T16:00:00-03:00"
  }
}
```

**Casos de uso**:
- Notificar cliente sobre in√≠cio do processo
- Atualizar status do pedido
- Registrar solicita√ß√£o no sistema

---

### refund.succeeded
**Quando**: Reembolso √© processado com sucesso.

```json
{
  "event": "refund.succeeded",
  "api_version": "2024-01",
  "timestamp": "2024-01-02T15:30:00-03:00",
  "data": {
    "id": "ref_7g8h9i0j1k2l",
    "status": "completed",
    "amount": 7500,
    "currency": "BRL",
    "reason": "customer_request",
    "description": "Reembolso parcial - produto danificado",
    "charge": {
      "id": "chg_1a2b3c4d5e6f",
      "amount": 15000,
      "external_id": "pedido_12345"
    },
    "customer": {
      "id": "cust_9z8y7x6w",
      "name": "Maria Silva",
      "email": "maria@email.com"
    },
    "completed_at": "2024-01-02T15:30:00-03:00",
    "pix_refund": {
      "end_to_end_id": "D12345678202401021530987654321",
      "txid": "REF123456789"
    },
    "fee": {
      "amount": 0,
      "description": "Sem taxa para reembolso PIX"
    },
    "net_amount": 7500
  }
}
```

**Casos de uso**:
- Confirmar reembolso para cliente
- Atualizar status financeiro
- Processar log√≠stica reversa
- Atualizar contabilidade

---

### refund.failed
**Quando**: Reembolso falha no processamento.

```json
{
  "event": "refund.failed",
  "api_version": "2024-01",
  "timestamp": "2024-01-02T15:45:00-03:00",
  "data": {
    "id": "ref_7g8h9i0j1k2l",
    "status": "failed",
    "amount": 7500,
    "currency": "BRL",
    "reason": "customer_request",
    "charge": {
      "id": "chg_1a2b3c4d5e6f",
      "external_id": "pedido_12345"
    },
    "customer": {
      "id": "cust_9z8y7x6w",
      "name": "Maria Silva",
      "email": "maria@email.com"
    },
    "failure": {
      "code": "ACCOUNT_CLOSED",
      "message": "Conta do benefici√°rio foi encerrada",
      "category": "recipient_error",
      "occurred_at": "2024-01-02T15:45:00-03:00"
    },
    "retry_available": true,
    "max_retries": 3,
    "retry_count": 1
  }
}
```

**C√≥digos de falha de reembolso**:
- `ACCOUNT_CLOSED`: Conta encerrada
- `INVALID_ACCOUNT`: Dados banc√°rios inv√°lidos
- `LIMIT_EXCEEDED`: Limite de reembolso excedido
- `INSUFFICIENT_BALANCE`: Saldo insuficiente para reembolso

**Casos de uso**:
- Notificar equipe financeira
- Solicitar dados banc√°rios atualizados
- Processar reembolso manual
- Reagendar tentativa

---

### refund.cancelled
**Quando**: Reembolso √© cancelado antes do processamento.

```json
{
  "event": "refund.cancelled",
  "api_version": "2024-01",
  "timestamp": "2024-01-02T12:00:00-03:00",
  "data": {
    "id": "ref_7g8h9i0j1k2l",
    "status": "cancelled",
    "amount": 7500,
    "currency": "BRL",
    "reason": "customer_request",
    "charge": {
      "id": "chg_1a2b3c4d5e6f",
      "external_id": "pedido_12345"
    },
    "cancellation": {
      "reason": "customer_withdrew_request",
      "cancelled_by": "customer",
      "cancelled_at": "2024-01-02T12:00:00-03:00",
      "notes": "Cliente retirou solicita√ß√£o de reembolso"
    }
  }
}
```

**Casos de uso**:
- Reverter processo de reembolso
- Notificar equipe financeira
- Manter status original do pedido

## üîÑ Eventos de Transactions

### transaction.created
**Quando**: Uma nova transa√ß√£o financeira √© criada no ledger.

```json
{
  "event": "transaction.created",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T10:15:00-03:00",
  "data": {
    "id": "txn_5s6t7u8v9w0x",
    "type": "payment_settlement",
    "status": "pending",
    "amount": 14850,
    "currency": "BRL",
    "charge": {
      "id": "chg_1a2b3c4d5e6f",
      "external_id": "pedido_12345"
    },
    "customer": {
      "id": "cust_9z8y7x6w",
      "name": "Maria Silva"
    },
    "merchant": {
      "id": "merch_abc123",
      "name": "Loja Tech Ltda"
    },
    "fee_breakdown": {
      "base_fee": 150,
      "processing_fee": 0,
      "total_fee": 150
    },
    "created_at": "2024-01-01T10:15:00-03:00"
  }
}
```

**Casos de uso**:
- Registrar transa√ß√£o no ERP
- Iniciar processo de concilia√ß√£o
- Atualizar saldo dispon√≠vel

---

### transaction.updated
**Quando**: Status ou dados de uma transa√ß√£o s√£o atualizados.

```json
{
  "event": "transaction.updated",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T10:16:00-03:00",
  "data": {
    "id": "txn_5s6t7u8v9w0x",
    "type": "payment_settlement",
    "status": "processing",
    "amount": 14850,
    "previous_status": "pending",
    "updated_fields": ["status", "processing_started_at"],
    "processing_started_at": "2024-01-01T10:16:00-03:00",
    "estimated_settlement": "2024-01-01T10:17:00-03:00",
    "updated_at": "2024-01-01T10:16:00-03:00"
  }
}
```

**Casos de uso**:
- Atualizar dashboards em tempo real
- Notificar sobre mudan√ßas de status
- Ajustar expectativas de liquida√ß√£o

---

### transaction.completed
**Quando**: Transa√ß√£o √© finalizada e o valor est√° dispon√≠vel.

```json
{
  "event": "transaction.completed",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T10:17:00-03:00",
  "data": {
    "id": "txn_5s6t7u8v9w0x",
    "type": "payment_settlement",
    "status": "completed",
    "amount": 14850,
    "currency": "BRL",
    "charge": {
      "id": "chg_1a2b3c4d5e6f",
      "external_id": "pedido_12345"
    },
    "settlement": {
      "settled_at": "2024-01-01T10:17:00-03:00",
      "settlement_id": "set_xyz789",
      "bank_reference": "BCB20240101001234567"
    },
    "fee_breakdown": {
      "base_fee": 150,
      "processing_fee": 0,
      "total_fee": 150
    },
    "available_for_withdrawal": true,
    "completed_at": "2024-01-01T10:17:00-03:00"
  }
}
```

**Casos de uso**:
- Disponibilizar saldo para saque
- Gerar relat√≥rios financeiros
- Processar pagamentos a fornecedores
- Confirmar liquida√ß√£o em sistemas cont√°beis

## ‚öôÔ∏è Eventos de System

### webhook.test
**Quando**: Teste de webhook √© executado via API ou dashboard.

```json
{
  "event": "webhook.test",
  "api_version": "2024-01",
  "timestamp": "2024-01-01T09:00:00-03:00",
  "data": {
    "webhook_id": "wh_5s6t7u8v9w0x",
    "test_id": "test_1234567890",
    "message": "Este √© um webhook de teste da Debita AI",
    "environment": "sandbox",
    "triggered_by": "dashboard_user_123"
  }
}
```

**Casos de uso**:
- Verificar conectividade do endpoint
- Testar valida√ß√£o HMAC
- Validar processamento de webhooks
- Confirmar configura√ß√£o correta

## üìä Estrutura de Payload Detalhada

### Headers HTTP

Todos os webhooks incluem os seguintes headers:

```http
POST /sua-url/webhook
Content-Type: application/json
X-Debita-Signature: sha256=8b23a2c5e1f4d3a7b9c6...
X-Debita-Timestamp: 1640995200
X-Debita-Event: charge.succeeded
X-Debita-Webhook-Id: wh_5s6t7u8v9w0x
X-Debita-Delivery-Id: del_9a8b7c6d5e4f
User-Agent: Debita-Webhooks/1.0
```

### Campos Comuns

Todos os eventos incluem:

| Campo | Tipo | Descri√ß√£o |
|-------|------|-----------|
| `event` | string | Tipo do evento |
| `api_version` | string | Vers√£o da API |
| `timestamp` | string | Timestamp ISO 8601 |
| `data` | object | Dados espec√≠ficos do evento |

### Metadata Personalizada

Campos `metadata` s√£o preservados em todos os eventos relacionados:

```json
{
  "metadata": {
    "pedido_id": "12345",
    "vendedor": "loja_tech",
    "categoria": "eletronicos",
    "campanha": "black_friday",
    "utm_source": "google_ads"
  }
}
```

---

<Tip>
**Pr√≥ximo Passo**: Aprenda sobre [seguran√ßa de webhooks](/webhooks/seguranca) e implementa√ß√£o de valida√ß√£o HMAC robusta.
</Tip>